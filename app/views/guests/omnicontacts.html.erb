<%= text_field_tag :contacts, "", {id: "email-dropdown", placeholder: "Enter Emails"} %>

<ul id="email-list"></ul>


<script>

$(function() {
    //console.log("here");
    //console.log(getEmails());
$( "#email-dropdown" ).autocomplete({
    source: getEmails(),
    autoFocus: true,
    minLength: 3,
    dataType: 'json',
    delay: 500,
    select: function( event, ui ) {
        /*var addy = ""
        ui.item.address.forEach(function(line) {
            addy += line + "\n";
        });*/
       $("#email-list").append("<li>"+ ui.item.value + "</li>");
       $("#email-dropdown").val("");
       console.log("poop");

    },
    open: function() {
        $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
    },
    close: function() {
        $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
    }
});

function getEmails() {
       var emails = <%= raw @emails.to_json %>;

        return emails;
}


});
</script>